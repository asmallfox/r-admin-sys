import{_ as g,P as y,c as x}from"./index-69c637f4.js";async function O(t){const e=await g(()=>import("./mock-0fd431ae.js").then(i=>i.m),["assets/mock-0fd431ae.js","assets/index-69c637f4.js","assets/index-e69d5bbc.css"]),{pathToRegexp:r}=await g(()=>import("./index-553864bc.js"),[]);e.XHR.prototype.__send=e.XHR.prototype.send,e.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const i={};for(let s in this.custom.requestHeaders)i[s.toString().toLowerCase()]=this.custom.requestHeaders[s];this.custom.options=Object.assign({},this.custom.options,{headers:i})}this.__send.apply(this,arguments)},e.XHR.prototype.proxy_open=e.XHR.prototype.open,e.XHR.prototype.open=function(){let i=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&i&&(this.custom.xhr.responseType=i)};for(const{url:i,method:s,response:n,timeout:o}of t)v(e,o),e.mock(r(i,void 0,{end:!1}),s||"get",E(e,n))}function D(t){const e=t.split("?")[1];return e?JSON.parse('{"'+decodeURIComponent(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function E(t,e){return function(r){let i=null;if(typeof e=="function"){const{body:s,type:n,url:o,headers:u}=r;let p=s;try{p=JSON.parse(s)}catch{}i=e({method:n,body:p,query:D(o),headers:u})}else i=e;return t.mock(i)}}function v(t,e=0){e&&t.setup({timeout:e})}var l=(t=>(t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.INVALID_TOKEN=401]="INVALID_TOKEN",t[t.SERVER_ERROR=500]="SERVER_ERROR",t))(l||{});function b(t){return!!t}function h(t,e="Request Successful"){return{data:t,message:e,code:200,type:"success"}}function f(t="Request Error"){return{message:t,code:404,type:"error"}}function k(t,e="request error"){const r={message:e,code:t,type:"error"};switch(t){case l.BAD_REQUEST:r.message="Params error!";break;case l.INVALID_TOKEN:r.message="Invalid Token!";break;case l.NOT_FOUND:r.message="Not Found!";break;case l.SERVER_ERROR:r.message="server Error!";break}return r}function R(t){return t==null?void 0:t.authorization}const m=[{id:1,content:"Study React",finished:!1},{id:2,content:"Study Node",finished:!1},{id:3,content:"Study Vue",finished:!1},{id:4,content:"Study Javascript",finished:!0},{id:5,content:"Study CSS + HTML",finished:!0}],w=()=>[{url:"/basic-api/todo-list",method:"get",response:t=>{const{headers:e}=t;return b(e==null?void 0:e.authorization)?{code:200,rows:m,count:m.length}:k(l.INVALID_TOKEN)}},{url:"/basic-api/todo-list",method:"put",response:t=>{const{body:e,headers:r}=t;return b(r==null?void 0:r.authorization)?m.some(s=>s.content===e.content)?k(l.BAD_REQUEST):(m.push({id:m.length,content:e.content,finished:e.finished??!1}),{code:200,message:"success"}):k(l.INVALID_TOKEN)}}],I=[{title:"关于",path:"/about"},{title:"工作台",path:"/dashboard",children:[{title:"表盘仪",path:"analysis"},{title:"统计",path:"workspace"}]},{title:"Demo",path:"/demo",children:[{title:"todoList",path:"todo-list"},{title:"PrintDome",path:"print-dome"}]},{title:"echart",path:"/echart",children:[{title:"可视化大屏",path:"large-screen"}]},{title:"用户管理",path:"/user",children:[{title:"系统管理员",path:"admin"},{title:"普通用户",path:"ordinary-user"},{title:"用户详情",path:"admin_detail/:id"},{title:"Test",path:"consumer",children:[{title:"test1",path:"consumer-1"},{title:"test2",path:"consumer-2"}]}]}],A=[{key:"dashboard",path:"/dashboard",children:[{key:"analysis",path:"analysis",label:"表盘仪"},{key:"workspace",path:"workspace",label:"统计"}],redirect:"/dashboard/analysis",label:"工作台"},{key:"user",path:"/user",children:[{key:"ordinary-user",path:"ordinary-user",label:"普通用户"},{key:"admin_detail",path:"admin_detail/:id",active_menu:"/user/administrator/super-admin",label:"用户详情"},{key:"consumer",path:"consumer",children:[{key:"consumer-1",path:"consumer-1",label:"test1"},{key:"consumer-2",path:"consumer-2",label:"test2"}],redirect:"/user/consumer/consumer-1",label:"Test"}],redirect:"/user/administrator/super-admin",label:"用户管理"},{key:"demo",path:"/demo",children:[{key:"todo-list",path:"todo-list",label:"todoList"},{key:"print-dome",path:"print-dome",label:"PrintDome"}],redirect:"/demo/todo-list",label:"Demo"},{key:"echart",path:"/echart",children:[{key:"large-screen",path:"large-screen",label:"可视化大屏"}],label:"echart"},{key:"three",path:"/three",label:"Three"},{key:"about",path:"/about",label:"关于"}],a=[1,2,3,4],c=[{id:1,username:"admin",nickname:"系统管理员",role:a[0],createTime:1682385080446,description:"Tom",permissions:y.ADMIN,password:"123456",avatar:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg"},{id:2,username:"smallfox",nickname:"小狐幽",role:a[1],createTime:1682643537823,description:"开发人员",avatar:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg"},{id:3,username:"adminTest",nickname:"测试",role:a[1],createTime:1514569812e3,description:"测试",permissions:y.TEST,password:"123456",avatar:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg"},{id:4,username:"asdf",nickname:"王五",role:a[2],createTime:15147648e5,description:"系统管理员3"},{id:5,username:"Tom",nickname:"张三",role:a[0],createTime:15147648e5,description:"系统管理员1"},{id:6,username:"smallfox",nickname:"小狐幽",role:a[1],createTime:15147648e5,description:"开发人员"},{id:7,username:"admin",nickname:"管理人员1",role:a[1],createTime:15147648e5,description:"系统管理员2"},{id:8,username:"asdf",nickname:"王五",role:a[2],createTime:15147648e5,description:"系统管理员3"},{id:9,username:"Tom",nickname:"张三",role:a[0],createTime:15147648e5,description:"系统管理员1"},{id:10,username:"smallfox",nickname:"小狐幽",role:a[1],createTime:15147648e5,description:"开发人员"},{id:11,username:"admin",nickname:"管理人员1",role:a[1],createTime:15147648e5,description:"系统管理员2"},{id:12,username:"asdf",nickname:"王五",role:a[2],createTime:15147648e5,description:"系统管理员3"},{id:13,username:"Tom",nickname:"张三",role:a[0],createTime:15147648e5,description:"系统管理员1"},{id:14,username:"smallfox",nickname:"小狐幽",role:a[1],createTime:15147648e5,description:"开发人员"},{id:15,username:"admin",nickname:"管理人员1",role:a[1],createTime:15147648e5,description:"系统管理员2"},{id:16,username:"asdf",nickname:"王五",role:a[2],createTime:15147648e5,description:"系统管理员3"}],_=new Array(30).fill(0).map((t,e)=>({id:e+1,username:`小狐幽${e+1}`,account:"smallfox",email:"smallfox@gmail.com",createTime:15147648e5,updateTime:15147648e5})),H=()=>[{url:"/basic-api/getMenuList",timeout:1e3,method:"get",response:t=>{const e=R(t.headers);if(e){const r=JSON.parse(e),i=c.find(s=>s.id===r.id&&s.username===r.username);if(i){let s=[];switch(i.permissions){case y.ADMIN:s=I;break;case y.TEST:s=A;break}return h(s)}}return f("Invalid token")}}],L=t=>[{url:"/basic-api/login",method:"post",response:({body:e})=>{const{username:r,password:i}=e,s=c.find(n=>n.username===r);if(s&&s.password===i){const n={token:JSON.stringify({username:r,id:s.id,permissions:s.permissions}),userInfo:s};return h(n)}return f("Incorrect username ro password")}},{url:"/basic-api/userinfo",method:"get",response:e=>{const r=R(e.headers);if(r){const{id:i,username:s}=JSON.parse(r),n=c.find(o=>o.id===i&&o.username===s);if(n)return h(n)}return f()}},{url:"/basic-api/user-list",method:"get",response:({query:e})=>{const{page:r=1,pageSize:i=10,order:s="asc",username:n,nickname:o}=e;let u=x(c).sort((d,T)=>s==="asc"?d.createTime-T.createTime:s==="desc"?T.createTime-d.createTime:0);(n||o)&&(u=u.filter(d=>n!==void 0&&o!==void 0?d.username.indexOf(n)>-1&&d.nickname.indexOf(o)>-1:d.username.indexOf(n)>-1||d.nickname.indexOf(o)>-1));const p=(r-1)*i,N=p+Number(i);u=u.slice(p,N);const S={rows:u.map(d=>({...d,id:d.id.toString(),role:d.role.toString()})),total:c.length};return h(S)}},{url:"/basic-api/delete-user-by-id",method:"delete",response:({body:e})=>{try{const r=c.findIndex(i=>i.id===Number(e.id));if(r===-1)throw new Error("Invalid id");return c.splice(r,1),h(null,"Delete by id successfully")}catch(r){return f(r.message)}}},{url:"/basic-api/add-user",method:"post",response:({body:e})=>{const{username:r,nickname:i,role:s,description:n}=e,o=c.some(u=>u.username===r);return!r||!i||!s?{code:404,data:{message:"Please input all fields"},type:"error"}:o?{code:404,data:{message:"user already exists"},type:"error"}:(c.push({id:c.length+1,username:r,nickname:i,role:s,description:n,createTime:Date.now()}),{code:200,data:{message:"Add user successfully"}})}},{url:"/basic-api/update-user-by-id/:id",method:"put",response:({body:e,query:r})=>{const{id:i}=r,s=c.findIndex(n=>n.id===Number(i));if(s!==-1)c[s]={...c[s],...e};else return{code:404,data:{message:"Invalid id"},type:"error"};return{code:200,data:{message:"Update user successfully"}}}},{url:"/basic-api/ordinary-user-list",method:"get",response:e=>({code:200,data:{rows:_,total:_.length}})}];async function U(){O([...w(),...H(),...L()])}export{U as setupProdMockServer};
